<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" /><script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(e,n,t){function r(t){if(!n[t]){var o=n[t]={exports:{}};e[t][0].call(o.exports,function(n){var o=e[t][1][n];return r(o||n)},o,o.exports)}return n[t].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<t.length;o++)r(t[o]);return r}({1:[function(e,n,t){function r(){}function o(e,n,t){return function(){return i(e,[c.now()].concat(u(arguments)),n?null:this,t),n?void 0:this}}var i=e("handle"),a=e(2),u=e(3),f=e("ee").get("tracer"),c=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],d="api-",l=d+"ixn-";a(p,function(e,n){s[n]=o(d+n,!0,"api")}),s.addPageAction=o(d+"addPageAction",!0),s.setCurrentRouteName=o(d+"routeName",!0),n.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,n){var t={},r=this,o="function"==typeof n;return i(l+"tracer",[c.now(),e,t],r),function(){if(f.emit((o?"":"no-")+"fn-start",[c.now(),r,o],t),o)try{return n.apply(this,arguments)}finally{f.emit("fn-end",[c.now()],t)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,n){m[n]=o(l+n)}),newrelic.noticeError=function(e){"string"==typeof e&&(e=new Error(e)),i("err",[e,c.now()])}},{}],2:[function(e,n,t){function r(e,n){var t=[],r="",i=0;for(r in e)o.call(e,r)&&(t[i]=n(r,e[r]),i+=1);return t}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],3:[function(e,n,t){function r(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,o=t-n||0,i=Array(o<0?0:o);++r<o;)i[r]=e[n+r];return i}n.exports=r},{}],4:[function(e,n,t){n.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,n,t){function r(){}function o(e){function n(e){return e&&e instanceof r?e:e?f(e,u,i):i()}function t(t,r,o,i){if(!d.aborted||i){e&&e(t,r,o);for(var a=n(o),u=m(t),f=u.length,c=0;c<f;c++)u[c].apply(a,r);var p=s[y[t]];return p&&p.push([b,t,r,a]),a}}function l(e,n){v[e]=m(e).concat(n)}function m(e){return v[e]||[]}function w(e){return p[e]=p[e]||o(t)}function g(e,n){c(e,function(e,t){n=n||"feature",y[t]=n,n in s||(s[n]=[])})}var v={},y={},b={on:l,emit:t,get:w,listeners:m,context:n,buffer:g,abort:a,aborted:!1};return b}function i(){return new r}function a(){(s.api||s.feature)&&(d.aborted=!0,s=d.backlog={})}var u="nr@context",f=e("gos"),c=e(2),s={},p={},d=n.exports=o();d.backlog=s},{}],gos:[function(e,n,t){function r(e,n,t){if(o.call(e,n))return e[n];var r=t();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,n,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return e[n]=r,r}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],handle:[function(e,n,t){function r(e,n,t,r){o.buffer([e],r),o.emit(e,n,t)}var o=e("ee").get("handle");n.exports=r,r.ee=o},{}],id:[function(e,n,t){function r(e){var n=typeof e;return!e||"object"!==n&&"function"!==n?-1:e===window?0:a(e,i,function(){return o++})}var o=1,i="nr@id",a=e("gos");n.exports=r},{}],loader:[function(e,n,t){function r(){if(!x++){var e=h.info=NREUM.info,n=d.getElementsByTagName("script")[0];if(setTimeout(s.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&n))return s.abort();c(y,function(n,t){e[n]||(e[n]=t)}),f("mark",["onload",a()+h.offset],null,"api");var t=d.createElement("script");t.src="https://"+e.agent,n.parentNode.insertBefore(t,n)}}function o(){"complete"===d.readyState&&i()}function i(){f("mark",["domContent",a()+h.offset],null,"api")}function a(){return E.exists&&performance.now?Math.round(performance.now()):(u=Math.max((new Date).getTime(),u))-h.offset}var u=(new Date).getTime(),f=e("handle"),c=e(2),s=e("ee"),p=window,d=p.document,l="addEventListener",m="attachEvent",w=p.XMLHttpRequest,g=w&&w.prototype;NREUM.o={ST:setTimeout,SI:p.setImmediate,CT:clearTimeout,XHR:w,REQ:p.Request,EV:p.Event,PR:p.Promise,MO:p.MutationObserver};var v=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1039.min.js"},b=w&&g&&g[l]&&!/CriOS/.test(navigator.userAgent),h=n.exports={offset:u,now:a,origin:v,features:{},xhrWrappable:b};e(1),d[l]?(d[l]("DOMContentLoaded",i,!1),p[l]("load",r,!1)):(d[m]("onreadystatechange",o),p[m]("onload",r)),f("mark",["firstbyte",u],null,"api");var x=0,E=e(4)},{}]},{},["loader"]);</script><script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","queueTime":0,"licenseKey":"cd1101aa94","agent":"","transactionName":"bgcDMkBZW0NZBkdcWVdNJxNcW0FZVwscV1dKB08QW11CQxYTWlBBZgEOC19dW0QCEVtHU1gG","applicationID":"6369297","errorBeacon":"bam.nr-data.net","applicationTime":354}</script>
    <title>Computing standardized logistic regression coefficients | Thinklab</title>
	  <link rel="shortcut icon" href="https://think-lab.s3.amazonaws.com/s/img/favicon.ico" type="image/x-icon" />
    <meta property="og:image" content="https://think-lab.s3.amazonaws.com/s/img" />
    
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css" />

<link rel="stylesheet" href="https://think-lab.s3.amazonaws.com/s/highlightjs/github.css" />
<link rel="stylesheet" href="https://think-lab.s3.amazonaws.com/s/css/css.css" />
<link rel="stylesheet" href="https://think-lab.s3.amazonaws.com/s/css/bootstrap-multiselect.css" />
<!-- <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'> -->

    
    
    
    
  
    <meta name="citation_doi" content="10.15363/thinklab.d205">
    <meta name="citation_title" content="Computing standardized logistic regression coefficients">
    <meta name="citation_online_date" content="April 21, 2016">
    <meta name="citation_author" content="Daniel Himmelstein, Antoine Lizee">
    <meta name="citation_journal_title" content="Thinklab">
    <meta name="citation_publisher" content="Thinklab">
  

    


	<!-- GoogleAnalytics -->
	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-48550230-1', 'thinklab.com');
	ga('require', 'displayfeatures');
	
	ga('send', 'pageview');

	</script>






</head>
<body >
  <form id="form_action" method="post">
    <input type='hidden' name='csrfmiddlewaretoken' value='pQNiZQX4gF2vyFeXrnbUl9EmuTWA5MG1' />
</form>

	

	<div class="body-wrapper">

		


<!-- <div style="height:5px;background-image:url('https://think-lab.s3.amazonaws.com/s/img/top-bg.gif');"></div> -->
<div class="gradient">
	<div class="main-centered-div header-container">

<table class="full-width" style="height:60px;"><tr>
	<td style="width:200px;vertical-align:middle;padding-bottom:15px;">
		<a href="/" style="font-weight:normal;color:#212121;"><img src="https://think-lab.s3.amazonaws.com/s/img/logo.png" width="160"></a>
	</td><td style="vertical-align:middle;text-align:left;padding-top:6px;width:100%;padding-left:40px;">
		<ul id="not-search-block"  class="main-header">


			


				<li class="dropdown">
					<a class="dropdown-toggle" data-toggle="dropdown" href="#">Browse <span class="caret"></span></a>
					<ul class="dropdown-menu" role="menu">
						<li><a href="/proposals">Proposals</a></li>
						<li><a href="/projects">Projects</a></li>
						<li><a href="/publications">Article discussion</a></li>
						<li><a href="/discussion">All discussion</a></li>
					</ul>
				</li>
				<li><a href="/leaderboard">Leaderboard</a></li>

			
				<li><a href="/about">About</a></li>
			


		</ul>

    <ul id="search-block" class="main-header" style="display: none; margin-right: 30px;">
        <li class="full-width">
            <form method="get" action="/search">
			<div class="input-group full-width">
				<input name="q" type="text" class="form-control search-input">
			</div>
            </form>
        </li>
    </ul>

	</td><td style="vertical-align:middle;text-align:right;padding-top:6px; min-width: 1%; white-space: nowrap;">
		<ul class="main-header pull-right" style="padding-left: 0;">
    		
                <li><a href="/login" style="color:silver;">Login</a></li>
                <li style="margin-right:0"><a class="btn btn-default btn-sm btn-upper" href="/signup">Join</a></li>
            

        </ul>
    </ul>
	</td>
</tr></table>

<!-- <div id="global-search-div" class="main-centered-div" style="display:none;">
	<input type="text" value="" class="thread-search form-control" placeholder="Search" data-action="/discussion">
</div> -->

	</div>
</div>

		
	  



	  


		

		<div class="dark-head"><div class="main-centered-div">

			

		</div></div>
		
		<div class="main-centered-div" style="margin-top:40px;padding-bottom:340px">
	    

<div style="margin-top:-20px; margin-bottom:20px;">

    <a class="side-box" href="/p/rephetio" style="background-color:#ebfdff;"><div class="side-type">Project:</div> <div class="side-title">Rephetio: Repurposing drugs on a hetnet [rephetio]</div></a><br>



</div>

<table style="margin-top:0px;"><tr>
	<td class="thread-table-content">

		<table class="full-width">
			
<tr class="comment-tr target-hl" id="1" data-comment-id="1283">
  <td class="comment-profile-avatar">
		<a href="/u/dhimmel"><img class='profile_image photo-medium' src='https://think-lab.s3.amazonaws.com/m/profile/17_medium.jpg' width='60' height='60'></a>
  </td>
	<td class="comment-body">
    <a name="1283"></a>

    

			<h2 class="page-title" style="margin-bottom:5px;margin-top:0px !important;">Computing standardized logistic regression coefficients</h2>

			<div style="margin-top:5px;color:gray;margin-bottom:20px;font-size:13px;">
				<a style="font-weight:normal;color:#212121" href="/u/dhimmel"><strong>Daniel Himmelstein</strong></a>
				<span class="is-researcher">Researcher</span>
				&nbsp; <a href="#1" class="light">442 days ago</a>
				
			</div>

      

          <hr>
		

    <p>It appears that there are multiple ways to compute <a href="https://en.wikipedia.org/wiki/Standardized_coefficient">standardized coefficients</a> for logistic regression <span class="citation">[<a href="https://doi.org/10.1093/sf/89.4.1409" class="citation" data-key="10.1093/sf/89.4.1409">1</a>, <a href="https://doi.org/10.1007/978-981-287-077-3_63" class="citation" data-key="10.1007/978-981-287-077-3_63">2</a>, <a href="https://doi.org/10.1198/000313004x946" class="citation" data-key="10.1198/000313004x946">3</a>]</span>. We'd like a way to make coefficients comparable across features. <a href="/u/alizee" class="username">@alizee</a>, can you look over this debate and decide on a method? In addition, we should be aware of <a href="http://www.mwsug.org/proceedings/2009/stats/MWSUG-2009-D10.pdf" title="Thompson (2009) Ranking Predictors in Logistic Regression">other approaches</a> for comparing feature importance in logistic regression.</p>

		<div style="margin-left:30px;">

      


      <ul class="comment-notes">
				
				
			</ul>

      

		</div>

		


  </td>
</tr>

<tr class="comment-tr target-hl" id="2" data-comment-id="1284">
  <td class="comment-profile-avatar">
		<a href="/u/dhimmel"><img class='profile_image photo-medium' src='https://think-lab.s3.amazonaws.com/m/profile/17_medium.jpg' width='60' height='60'></a>
  </td>
	<td class="comment-body">
    <a name="1284"></a>

    

      <div class="comment-header">
        <a style="font-weight:bold;color:#212121" href="/u/dhimmel">Daniel Himmelstein</a>
				<span class="is-researcher">Researcher</span>
				<span class="light">&nbsp;<a href="#2" class="light">442 days</a>
          
        </span>
      </div>

    

    <h1>Agresti method</h1>

<p><a href="/u/alizee" class="username">@alizee</a> and I were talking this morning, prior to this discussion, and he arrived at the Agresti method <span class="citation">[<a href="https://doi.org/10.1002/0470114754" class="citation" data-key="10.1002/0470114754">1</a>]</span>. Agresti describes the method as follows (§ 4.5.2 Standardized Interpretations <span class="citation">[<a href="https://doi.org/10.1002/9780470114759.ch4" class="citation" data-key="10.1002/9780470114759.ch4">2</a>]</span>):</p>

<blockquote><p>With multiple predictors, it is tempting to compare magnitudes of <span class="math">$$\{\hat{\beta}_j\}$$</span> to compare effects of predictors. For binary predictors, this gives a comparison of conditional log odds ratios, given the other predictors in the model. For quantitative predictors, this is relevant if the predictors have the same units, so a 1-unit change means the same thing for each. Otherwise, it is not meaningful.</p><p>An alternative comparison of effects of quantitative predictors having different units uses <em>standardized coefficients</em>. The model is fitted to standardized predictors, replacing each <span class="math">$$x_j$$</span> by <span class="math">$$(x_j - \bar{x}_j) \mathbin{/} s_{x_j}$$</span>. A 1-unit change in the standardized predictor is a standard deviation change in the original predictor. Then, each regression coefficient represents the effect of a standard deviation change in a predictor, controlling for the other variables. The standardized estimate for predictor <span class="math">$$x_j$$</span> is the unstandardized estimate <span class="math">$$\hat{\beta}_j$$</span> multiplied by <span class="math">$$s_{x_j}$$</span>.</p></blockquote>

<p>This method is simple and intuitive. I believe it corresponds to coefficients from converting each predictor to <em>z</em>-scores and then fitting the logistic regression model. I <a href="https://github.com/dhimmel/hetior/commit/0e2691810ed7132c2431020c6882b180c1329c76" title="Commit on GitHub">updated</a> our <code>hetior</code> package — which was previously using a flawed approach — to use the Agresti method.</p>

		<div style="margin-left:30px;">

      


      <ul class="comment-notes">
				
				
			</ul>

      

		</div>

		


  </td>
</tr>

<tr class="comment-tr target-hl" id="3" data-comment-id="1286">
  <td class="comment-profile-avatar">
		<a href="/u/alizee"><img class='profile_image photo-medium' src='https://think-lab.s3.amazonaws.com/m/profile/23_medium.jpg' width='60' height='60'></a>
  </td>
	<td class="comment-body">
    <a name="1286"></a>

    

      <div class="comment-header">
        <a style="font-weight:bold;color:#212121" href="/u/alizee">Antoine Lizee</a>
				<span class="is-researcher">Researcher</span>
				<span class="light">&nbsp;<a href="#3" class="light">431 days</a>
          
        </span>
      </div>

    

    <h1>A note on standardized coefficients for logistic regression</h1>

<p>This note aims at (i) understanding what standardized coefficients are, (ii) sketching the landscape of standardization approaches for logistic regression, (iii) drawing conclusions and guidelines to follow in general, and for our study in particular. I apologize for the length of the piece, but I find the exhaustivity of the result desirable — don't hesitate to jump to the conclusion if short in time.</p>

<p>This note draws mainly from the most recent review of Menart (2011) <span class="citation">[<a href="https://doi.org/10.1093/sf/89.4.1409" class="citation" data-key="10.1093/sf/89.4.1409">1</a>]</span>, as well as a few other papers <span class="citation">[<a href="https://doi.org/10.1007/978-981-287-077-3_63" class="citation" data-key="10.1007/978-981-287-077-3_63">2</a>, <a href="https://doi.org/10.1198/000313004x946" class="citation" data-key="10.1198/000313004x946">3</a>]</span> for exhaustivity and clarification purposes.</p>

<h2>Standardization is a transformation of the coefficients (not the model)</h2>

<p>The goal of standardized coefficients is to specify a same model with different nominal values of its parameters. These transformed values present the main advantage of relying on an objectively defined scale rather than depending on the original metric of the corresponding predictor.</p>

<p>Standardizing the coefficients is a matter of presentation and interpretation of a given model; it does not modify the model, its hypotheses, or its output. It <em>happens</em> that the approaches presented here sometimes results in parameters that coincide with the <em>expected</em> values for a different model, eg fitted with transformed input data. These are properties of some methods, not the goal of standardization.</p>

<p>Standardization enables three things that are not possible with unstandardized coefficients. First, it offers an objective scale to coefficients corresponding to variables that have no natural metric. Second, and most importantly, it lets the user compare the effect of different predictor variables within the same model, by simply comparing the values of the corresponding standardized coefficients. Third, standardized coefficients provide an alternative interpretation of the model parameters, based on 'standard deviation' units of the predicted variables (and optionally of the predictor). </p>

<p>Nevertheless, a few strong cases remain in favor of using unstandardized coefficients. The first one is the practical meaning of unstandardized coefficients when the predictor variable has a meaningful natural metric (like time, in years), or if the predictor is a boolean category (gender). In these cases, the interpretative power associated with unstandardized coefficients and their related parameters (e.g. odd ratios) promotes intuitive understanding and easy communication of the results. The second important problem that comes with (over)using standardized coefficients is their <em>sample specificity</em>. Even when studying the same phenomena, the standardized coefficients will have a different practical unit depending on the sample variance. This can pose significant challenges in interpreting the data, particularly when comparing models.</p>

<h2>Standardization approaches</h2>

<p>While standardized coefficients in classic linear regression are well-defined, logistic regression, like other generalized linear models, present additional complexity as a result of the non-linear link function (logit), and non-normal error function (binomial).</p>

<p>The — historically — first <em>Goodman</em>'s standardization method standardizes each coefficient by its standard-error, effectively performing the equivalent of a Wald-Test. Beyond this first method, irrelevant here, two approaches have been taken. We call the first <em>partial standardization</em>; it leaves the predicted boolean variable untouched when standardizing the coefficients, and solely relies on the dispersion of each corresponding predictor. The second approach, <em>full standardization</em>, incorporates the dispersion of the predicted variable in an attempt to improve the general relevance of the resulting standardized coefficients.</p>

<p>All these approaches result in sets of coefficients that are proportional to each other for a given model.</p>

<h3>Partial standardization</h3>

<p>We list here three variants of partial standardization. In all cases, each standardized coefficient <span class="math">$$b^*$$</span> is a scaling of the corresponding unstandardized coefficient <span class="math">$$b$$</span> by the sample standard deviation of the corresponding predictor <span class="math">$$\sigma_x$$</span>:</p>

<div class="math">$$$ b_{PS}^* = b \cdot \sigma_x \big/ C$$$</div>

<p>...where <span class="math">$$C$$</span> is a constant that depends on the variation.</p>

<p><strong>Agresti: <span class="math">$$ C = 1 $$</span></strong>. This is the most straightforward and clear approach, where the coefficient is specified in 'per standard deviation' unit of the predictor. The <em>Agresti</em> coefficients are equal to the expected values for the coefficients of the same model fitted on the standardized predictors, if the Maximum Likelihood Estimator is the fitting algorithm.</p>

<p><strong>SAS: <span class="math">$$ C = \text{sd}(logis) = \frac{\pi}{\sqrt3} $$</span></strong>. This method scales by the standard deviation of the logistic distribution of unit scale. The resulting coefficients are equal to the expected values for the coefficients of the logistic regression on the standardized predictors, if fitted with Ordinary Least Square. This approach is used in the software SAS. </p>

<p><strong>Long: <span class="math">$$ C = \text{sd}(logis) + \text{sd}(norm) = \frac{\pi}{\sqrt3} + 1 $$</span></strong>, where the standard deviation of the normal distribution is added to the normalization.</p>

<h3>Full standardization</h3>

<p>Here, we use the variance of the predicted variable to further scale the coefficients. This provides a closer equivalent to standardized coefficients of classic linear regression.</p>

<p>The main difficulty resides in the non-meaningful variance of the class outcome, which points to using the variance of the linear predictor <span class="math">$$\mathrm{logit}(Y)$$</span>. Nevertheless, because <span class="math">$$\mathrm{logit}(Y)$$</span> takes only values of <span class="math">$$\pm\infty$$</span>, its variance is not defined and we need proxies for it, based on <span class="math">$$\hat{Y}$$</span>, the <em>predicted</em> outcome. <em>Menard</em><span class="citation">[<a href="https://doi.org/10.4135/9781412983433" class="citation" data-key="10.4135/9781412983433">4</a>]</span> proposes the variance estimate <span class="math">$$ \sigma_{\mathrm{logit}(\hat{Y})}^2 / R^2 $$</span>, while <em>Long</em> proposes to use the variance of the underlying latent variable <span class="math">$$ \sigma_{\mathrm{logit}(\hat{Y})}^2 + \pi^2 / 3 $$</span>. The results can be expressed with the same formalism as above:</p>

<p><strong>Menard: <span class="math">$$ C = \sigma_{\mathrm{logit}(\hat{Y})} \big/ R $$</span></strong> This method, presented as superior than the others by its author <span class="citation">[<a href="https://doi.org/10.1093/sf/89.4.1409" class="citation" data-key="10.1093/sf/89.4.1409">1</a>]</span>, has the downside of relying on the R-square of the model, whose computation is ambiguous (Cox &amp; Snell, Nagelkerke, and others have proposed <a href="http://www.ats.ucla.edu/stat/mult_pkg/faq/general/Psuedo_RSquareds.htm"><em>pseudo</em>-R-squared</a> measures for logistic regression).</p>

<p><strong>Long (full): <span class="math">$$ C = \sqrt{\sigma_{\mathrm{logit}(\hat{Y})} ^2 + \pi^2/3} $$</span></strong></p>

<h2>Conclusion</h2>

<p>Standardized coefficients are extremely valuable, mainly to (i) give a meaning to the coefficient affecting a predictor that has no natural metric and (ii) compare effects of predictors reported in different units.</p>

<p>To achieve these two goals, I advise using the most straightforward, simple <em>Agresti</em> method of standardization:</p>

<div class="math">$$$ b^*_A = b \cdot \sigma_X $$$</div>

<p>Further, to improve the general relevance of the standardized coefficients, one can account for the sample dispersion of the outcome variable, and use <em>fully standardized</em> coefficients as first introduced by <em>Menard</em> (1995). When using <em>Menard</em>'s standardization, one must choose and report the measure of pseudo-R-squared used:</p>

<div class="math">$$$ b^*_M = b \cdot \sigma_X \cdot \frac{R}{\sigma_{\mathrm{logit}(\hat{Y})}}$$$</div>

<p>Standardized coefficients don't change the model. If they are used as the main specification of the model, the variables need to be scaled accordingly, and the intercept should be transformed as the result. </p>

<h3>For ML models on hetionet</h3>

<p>For <em>hetionet</em>'s edge prediction problems,  we use DWPCs features, whose unit is highly non-intuitive and of variable range across metapaths. Therefore, we settled on using exclusively standardized coefficients of the <em>Agresti</em> method.</p>

		<div style="margin-left:30px;">

      


      <ul class="comment-notes">
				
				
			</ul>

      

		</div>

		


  </td>
</tr>

<tr class="comment-tr target-hl" id="4" data-comment-id="1289">
  <td class="comment-profile-avatar">
		<a href="/u/dhimmel"><img class='profile_image photo-medium' src='https://think-lab.s3.amazonaws.com/m/profile/17_medium.jpg' width='60' height='60'></a>
  </td>
	<td class="comment-body">
    <a name="1289"></a>

    

      <div class="comment-header">
        <a style="font-weight:bold;color:#212121" href="/u/dhimmel">Daniel Himmelstein</a>
				<span class="is-researcher">Researcher</span>
				<span class="light">&nbsp;<a href="#4" class="light">431 days</a>
          
        </span>
      </div>

    

    <p>I agree that using the <em>Agresti</em> makes the most sense. Since we're not interested in comparing our logistic models to models created using different regression techniques, I don't think the complexity of meddling with <em>C</em> is justified. Also most modern implementations will be using maximum likelihood estimatation, right <a href="/u/alizee" class="username">@alizee</a>? So of the partial methods, <em>Agresti</em> will create coefficients equivalent to the a logistic model fit on <em>z</em>-score features.</p>

<p>Regarding the full standardization and the choice of a pseudo R-squared: Would you advise against using the Tjur coefficient of discrimination <span class="citation">[<a href="https://doi.org/10.1198/tast.2009.08210" class="citation" data-key="10.1198/tast.2009.08210">1</a>]</span>? Or would Tjur's statistic also work?</p>

<blockquote><p>the corresponding intercept should be computed ad hoc</p></blockquote>

<p>What formula should be used for computing the intercept?</p>

		<div style="margin-left:30px;">

      


      <ul class="comment-notes">
				
<li id="note-256" class="inline-note toggle-parent" data-note-id="256">
	<p><a href="/u/alizee">Antoine Lizee</a>: For the intercept, it depends on the way you transform your variables to reflect the changes in the standardized coefficient. For instance, if you center your variable in addition to scaling it by the standard deviation, as your previous post suggest, you get:<br><span class="math">$$ x^* = (x - \mu_x) / \sigma_x $$</span><br>and, <span class="math">$$\mu_x$$</span> referring to the centering parameter (here the mean):<br><span class="math">$$ b_0^* = b_0 + \sum b_x \cdot \mu_x $$</span>
		
	</p>
	
	<table style="display:none;"></table>
</li>

				
			</ul>

      

		</div>

		


  </td>
</tr>

<tr class="comment-tr target-hl" id="5" data-comment-id="1287">
  <td class="comment-profile-avatar">
		<a href="/u/alizee"><img class='profile_image photo-medium' src='https://think-lab.s3.amazonaws.com/m/profile/23_medium.jpg' width='60' height='60'></a>
  </td>
	<td class="comment-body">
    <a name="1287"></a>

    

      <div class="comment-header">
        <a style="font-weight:bold;color:#212121" href="/u/alizee">Antoine Lizee</a>
				<span class="is-researcher">Researcher</span>
				<span class="light">&nbsp;<a href="#5" class="light">431 days</a>
          
        </span>
      </div>

    

    <h2>Standardized coefficients &amp; glmnet</h2>

<p>In the edge prediction problem for <em>rephetio</em>, we use the R-package <code>glmnet</code> to perform lasso and ridge regression, in order to perform feature selection while fitting the model.</p>

<p>In the light of the note above, we wanted to adapt the <em>Artesi</em> standardization to the tools we are using.</p>

<h2>Summary</h2>

<p><code>glmnet</code>, by default, standardizes the predictor variables <strong>before</strong> fitting the model. After checking in the source code and testing (see below) we came to the conclusion that the computed coefficients were then <em>reverse</em> standardized, with the inverse of the Artesi transformation, in order to report the coefficients in their natural metric †.</p>

<p>Hence, there are three way to use standardization with the <code>glmnet</code> package:</p>

<ol><li><p><strong>Untransformed variables, specifying <code>standardize = FALSE</code></strong>: this corresponds to taking into account the units of the variables when fitting the regularisation. Because of the nature of regularization, this setting is usually undesirable and should be reserved to specific, well understood use-cases where keeping the variables in their natural metrics is justified. This is the only method where standardization of the coefficients after fitting of the model, as described in the note above, is appropriate.</p></li><li><p><strong>Untransformed variables, keeping the default <code>standardize = TRUE</code></strong>: This is the easiest option and advised for quick analysis. In order to get the standardized coefficients that actually were the result of the fitting process, apply the Agresti transformation.</p></li><li><p><strong>Standardized variables, with <code>standardize = FALSE</code></strong>: This last method has three key features: (i) it lets the user diagnose the regularisation in the correct units for the coefficients (using, e.g. <code>glmnet:::plot.glmnet()</code>); (ii) it lets the user deal differently with boolean or categorical variables if necessary; (iii) it makes obvious that the regularization has been done on transformed variables. The main disadvantage is that one must separately keep record of the scaling coefficients for future use of the model. If the variables are each standardized with the standard deviation (eg with <code>scale()</code>), this approach lead to the same <em>model</em> as the previous one.</p></li></ol>

<h2>Proof</h2>

<p>We needed to understand how were the variables standardized when using the <code>glmnet</code> package, and more importantly how were the coefficients transformed back in their natural metric after fitting the model with those standardized variables.</p>

<p>Unfortunately for our digging purposes (i) the code is written in FORTRAN, which made us nostalgic but required some getting used to; (ii) the code does not live on a source sharing platform, but fortunately has <a href="https://github.com/cran/glmnet">a mirror on github</a>, like all packages published on CRAN.</p>

<p>Everything we are interested in is in the <a href="https://github.com/cran/glmnet/blob/d80f1b1351ff68c03492aa654d437a99b4de5b49/src/glmnet5.f90">fortran source code file</a>, whose <a href="https://github.com/cran/glmnet/blob/d80f1b1351ff68c03492aa654d437a99b4de5b49/src/glmnet5.f90#L280">detailed comments</a> on the top alieviated the need to reverse-enginner the variable names.</p>

<ol><li><p>Definition of the <code>lognet</code> function (<code>routine</code>) starts at line <a href="https://github.com/cran/glmnet/blob/d80f1b1351ff68c03492aa654d437a99b4de5b49/src/glmnet5.f90#L2032">2032</a>. We will follow the track of the standardization flag <code>isd</code>.</p></li><li><p>Line <a href="https://github.com/cran/glmnet/blob/d80f1b1351ff68c03492aa654d437a99b4de5b49/src/glmnet5.f90#L2154">2154-2159</a>, we withness the centering and standardization of the variable array <code>x</code> by the vector of means <code>xms</code> and the vector of standard deviations <code>xs</code>, within the subfunction <code>lstandard1</code>:<br></p><pre><code class="no-highlight hljs">  if(ju(j).eq.0)goto 12561                                             1519
  xm(j)=dot_product(w,x(:,j))                                          1519
  x(:,j)=x(:,j)-xm(j)                                                  1520
  if(isd .le. 0)goto 12581                                             1520
  xs(j)=sqrt(dot_product(w,x(:,j)**2))                                 1520
  x(:,j)=x(:,j)/xs(j)                                                  1520</code></pre></li><li><p>Line <a href="https://github.com/cran/glmnet/blob/d80f1b1351ff68c03492aa654d437a99b4de5b49/src/glmnet5.f90#L2117">2117</a>:<br></p><pre><code class="no-highlight hljs">  ca(l,ic,k)=ca(l,ic,k)/xs(ia(l))                                      1499</code></pre></li><li><p>And finally, line <a href="https://github.com/cran/glmnet/blob/d80f1b1351ff68c03492aa654d437a99b4de5b49/src/glmnet5.f90#L2125">2125</a>, the intercept is computed (if the flag <code>intr</code> is 1):<br></p><pre><code class="no-highlight hljs">  a0(ic,k)=a0(ic,k)-dot_product(ca(1:nk,ic,k),xm(ia(1:nk)))            1501</code></pre></li></ol>

<h2>Test</h2>

<p>I wrote a quick <a href="https://htmlpreview.github.io/?https://github.com/antoine-lizee/R-Miscs/blob/adc01ea6d49514efb047c58376126b4480929eeb/Stat-glm_coeffs.html">R report</a> to test our conclusions on the famous <code>diamonds</code> dataset. </p>

<hr>

<p>† It also must be noted that <code>glmnet</code>, being written in fortran, does not make any difference between types of variables. As a result, the categorical and boolean predictor are treated as numeric vectors and standardized accordingly.</p>

		<div style="margin-left:30px;">

      


      <ul class="comment-notes">
				
				
			</ul>

      

		</div>

		


  </td>
</tr>

    		
		</table>

    

    &nbsp;<br>
    <a class="btn btn-primary btn-lg" href="/signup?next=/discussion/computing-standardized-logistic-regression-coefficients/205&suppress_message=1" style>Join to Reply</a>


		<table class="references table-td-5" style="display:none;"><tr><td><a href='/doi/10.1093/sf/89.4.1409' class='pub-comments tt-right zero-items' title='Article comments'>0</a></td><td><div class='pub-order'>1.</div></td><td><div class='doi-body' data-key='10.1093/sf/89.4.1409'><a href='/doi/10.1093/sf/89.4.1409' class='pub-title'>Standards for Standardized Logistic Regression Coefficients</a><div class='pub-body'>S. Menard (2011) <i>Social Forces</i>. doi:<a class='pub-doi' href='https://doi.org/10.1093/sf/89.4.1409'>10.1093/sf/89.4.1409</a></div></div></td></tr><tr><td><a href='/doi/10.1007/978-981-287-077-3_63' class='pub-comments tt-right zero-items' title='Article comments'>0</a></td><td><div class='pub-order'>2.</div></td><td><div class='doi-body' data-key='10.1007/978-981-287-077-3_63'><a href='/doi/10.1007/978-981-287-077-3_63' class='pub-title'>On the Performance of Several Approaches to Obtain Standardized Logistic Regression Coefficients</a><div class='pub-body'>Anwar Fitrianto, Imam Hanafi (2014) <i>Proceedings of the International Conference on Science, Technology and Social Sciences (ICSTSS) 2012</i>. doi:<a class='pub-doi' href='https://doi.org/10.1007/978-981-287-077-3_63'>10.1007/978-981-287-077-3_63</a></div></div></td></tr><tr><td><a href='/doi/10.1198/000313004x946' class='pub-comments tt-right zero-items' title='Article comments'>0</a></td><td><div class='pub-order'>3.</div></td><td><div class='doi-body' data-key='10.1198/000313004x946'><a href='/doi/10.1198/000313004x946' class='pub-title'>Six Approaches to Calculating Standardized Logistic Regression Coefficients</a><div class='pub-body'>Scott Menard (2004) <i>The American Statistician</i>. doi:<a class='pub-doi' href='https://doi.org/10.1198/000313004x946'>10.1198/000313004x946</a></div></div></td></tr><tr><td><a href='/doi/10.1002/0470114754' class='pub-comments tt-right zero-items' title='Article comments'>0</a></td><td><div class='pub-order'>4.</div></td><td><div class='doi-body' data-key='10.1002/0470114754'><a href='/doi/10.1002/0470114754' class='pub-title'>An Introduction to Categorical Data Analysis</a><div class='pub-body'>Alan Agresti (2007) <i>Wiley-Blackwell</i>. doi:<a class='pub-doi' href='https://doi.org/10.1002/0470114754'>10.1002/0470114754</a></div></div></td></tr><tr><td><a href='/doi/10.1002/9780470114759.ch4' class='pub-comments tt-right zero-items' title='Article comments'>0</a></td><td><div class='pub-order'>5.</div></td><td><div class='doi-body' data-key='10.1002/9780470114759.ch4'><a href='/doi/10.1002/9780470114759.ch4' class='pub-title'>Logistic Regression</a><div class='pub-body'> (unknown) <i>An Introduction to Categorical Data Analysis</i>. doi:<a class='pub-doi' href='https://doi.org/10.1002/9780470114759.ch4'>10.1002/9780470114759.ch4</a></div></div></td></tr><tr><td><a href='/doi/10.1093/sf/89.4.1409' class='pub-comments tt-right zero-items' title='Article comments'>0</a></td><td><div class='pub-order'>6.</div></td><td><div class='doi-body' data-key='10.1093/sf/89.4.1409'><a href='/doi/10.1093/sf/89.4.1409' class='pub-title'>Standards for Standardized Logistic Regression Coefficients</a><div class='pub-body'>S. Menard (2011) <i>Social Forces</i>. doi:<a class='pub-doi' href='https://doi.org/10.1093/sf/89.4.1409'>10.1093/sf/89.4.1409</a></div></div></td></tr><tr><td><a href='/doi/10.1007/978-981-287-077-3_63' class='pub-comments tt-right zero-items' title='Article comments'>0</a></td><td><div class='pub-order'>7.</div></td><td><div class='doi-body' data-key='10.1007/978-981-287-077-3_63'><a href='/doi/10.1007/978-981-287-077-3_63' class='pub-title'>On the Performance of Several Approaches to Obtain Standardized Logistic Regression Coefficients</a><div class='pub-body'>Anwar Fitrianto, Imam Hanafi (2014) <i>Proceedings of the International Conference on Science, Technology and Social Sciences (ICSTSS) 2012</i>. doi:<a class='pub-doi' href='https://doi.org/10.1007/978-981-287-077-3_63'>10.1007/978-981-287-077-3_63</a></div></div></td></tr><tr><td><a href='/doi/10.1198/000313004x946' class='pub-comments tt-right zero-items' title='Article comments'>0</a></td><td><div class='pub-order'>8.</div></td><td><div class='doi-body' data-key='10.1198/000313004x946'><a href='/doi/10.1198/000313004x946' class='pub-title'>Six Approaches to Calculating Standardized Logistic Regression Coefficients</a><div class='pub-body'>Scott Menard (2004) <i>The American Statistician</i>. doi:<a class='pub-doi' href='https://doi.org/10.1198/000313004x946'>10.1198/000313004x946</a></div></div></td></tr><tr><td><a href='/doi/10.4135/9781412983433' class='pub-comments tt-right zero-items' title='Article comments'>0</a></td><td><div class='pub-order'>9.</div></td><td><div class='doi-body' data-key='10.4135/9781412983433'><a href='/doi/10.4135/9781412983433' class='pub-title'>Applied Logistic Regression Analysis</a><div class='pub-body'> (2002) <i>SAGE Publications</i>. doi:<a class='pub-doi' href='https://doi.org/10.4135/9781412983433'>10.4135/9781412983433</a></div></div></td></tr><tr><td><a href='/doi/10.1198/tast.2009.08210' class='pub-comments tt-right zero-items' title='Article comments'>0</a></td><td><div class='pub-order'>10.</div></td><td><div class='doi-body' data-key='10.1198/tast.2009.08210'><a href='/doi/10.1198/tast.2009.08210' class='pub-title'>Coefficients of Determination in Logistic Regression Models—A New Proposal: The Coefficient of Discrimination</a><div class='pub-body'>Tue Tjur (2009) <i>The American Statistician</i>. doi:<a class='pub-doi' href='https://doi.org/10.1198/tast.2009.08210'>10.1198/tast.2009.08210</a></div></div></td></tr></table>

    


	</td>
	<td class="thread-sidebar">


			

      <a class="btn btn-default follow-link btn-follow btn-lg is-following tt-top full-width" title="Follow discussion" data-id="205" data-ctype="thread" data-is-following="false">&nbsp;</a>

      
        <div class="status-box text-center"><span style="">Status:</span> 
  Open

</div>
      

      
        
      


				

					<div class="details">Views</div>
					<span style="font-size:20px;">1614</span>

        

				
					<div class="details">Topics</div>
					<div style="margin-bottom:15px;">
		            <a href="/topics/regression" class="tag">Regression</a><a href="/topics/logistic-regression" class="tag">Logistic Regression</a><a href="/topics/glm" class="tag">GLM</a><a href="/topics/coefficients" class="tag">Coefficients</a><a href="/topics/statistics" class="tag">Statistics</a>
					</div>
				


		
			<div class="details">Referenced by</div>
			<div style="font-size:12px;"><ul style="padding-left:16px !important;">
			
				<li>
					
					<a href='/discussion/our-hetnet-edge-prediction-methodology-the-modeling-framework-for-project-rephetio/210' class='thread-title'>Our hetnet edge prediction methodology: the modeling framework for Project Rephetio</a>
				</li>
			
				<li>
					
					Research report: <a href='/p/rephetio/report'>Rephetio: Repurposing drugs on a hetnet</a>
				</li>
			
				</ul>
			</div>
		

		
			<div class="details">Cite this as</div>
			<span style="font-size:12px;">
				Daniel Himmelstein, Antoine Lizee (2016) Computing standardized logistic regression coefficients. <i>Thinklab.</i> doi:<a href='https://doi.org/10.15363/thinklab.d205'>10.15363/thinklab.d205</a>
			</span>
		

		<div class="details">License</div>
		<p><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0;width:88px;height:31px;" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a></p>

		<div class="details">Share</div>
		
			
				<a class="share-button fb" onclick="javascript:void(window.open('https://www.facebook.com/sharer/sharer.php?u=https%3A//thinklab.com/discussion/computing-standardized-logistic-regression-coefficients/205','','width=600,height=460,menubar=no,status=no'));" href="#"></a>
<a class="share-button twitter" onclick="javascript:void(window.open('https://twitter.com/share?text=Computing%20standardized%20logistic%20regression%20coefficients&url=https%3A//thinklab.com/discussion/computing-standardized-logistic-regression-coefficients/205','','width=600,height=300,menubar=no,status=no'));" href="#"></a>
<a class="share-button google" onclick="javascript:void(window.open('https://plus.google.com/share?url=https%3A//thinklab.com/discussion/computing-standardized-logistic-regression-coefficients/205','','width=510,height=460,menubar=no,status=no'));" href="#"></a>

			
		

	</td>
</tr></table>


		</div>


		
	    	<div class="footer">
<div style="background:#dedede;">
	<div class="main-centered-div text-center" style="padding:20px;">
		<h4 style="margin-bottom:0px;font-weight:bold;color:gray;">Feedback? Questions? Email us: <a href="/cdn-cgi/l/email-protection#1f777a7373705f6b77767174737e7d317c7072"><span class="__cf_email__" data-cfemail="dfb7bab3b3b09fabb7b6b1b4b3bebdf1bcb0b2">[email&#160;protected]</span><script data-cfhash='f9e31' type="text/javascript">/* <![CDATA[ */!function(t,e,r,n,c,a,p){try{t=document.currentScript||function(){for(t=document.getElementsByTagName('script'),e=t.length;e--;)if(t[e].getAttribute('data-cfhash'))return t[e]}();if(t&&(c=t.previousSibling)){p=t.parentNode;if(a=c.getAttribute('data-cfemail')){for(e='',r='0x'+a.substr(0,2)|0,n=2;a.length-n;n+=2)e+='%'+('0'+('0x'+a.substr(n,2)^r).toString(16)).slice(-2);p.replaceChild(document.createTextNode(decodeURIComponent(e)),c)}p.removeChild(t)}}catch(u){}}()/* ]]> */</script></a></h4>
	</div>
</div>
<div class="main-footer">
	<div class="main-centered-div">

<table class="full-width"><tr>
	<td class="footer-nav">

        <div class="foot-head">Explore</div>
        <a href="/proposals">Proposals</a><br>
        <a href="/projects">Projects</a><br>
        <a href="/publications">Article discussion</a><br>
        <a href="/discussion">All discussion</a><br>
        <a href="/topics">Topics</a><br>
        <!-- <a href="/funders">Funders</a><br> -->
        <a href="/funding">Funding opportunities</a><br>

	</td>
	<td class="footer-nav">

        <!-- <div class="foot-head">Help &amp; feedback</div>	 -->
        <!-- <div class="foot-head">Intro</div>
        <a href="/benefits/for-science">Why</a><br>
        <a href="/how-it-works">How it works</a><br>

<br> -->

        <div class="foot-head">Community</div>
        <a href="/leaderboard">Leaderboard</a><br>
        <a href="/p/meta">Thinklab Meta</a><br>
				<a href="/help/faq">Help</a><br>
				<!-- <a href="/new-project">Start a proposal</a><br> -->
        <!-- <a href="/benefits/proposal">Benefits</a><br> -->
        <!-- <a href="/funding">Get funded</a><br> -->
        <!-- <a href="/participate">Become a contributor</a><br> -->
        <!-- <a href="/for-funders">For science funders</a><br> -->
        <!-- <a href="/for-institutions">For institutions</a><br> -->

	</td>
	<td class="footer-nav">



        <div class="foot-head">About</div>
        <a href="/about">Overview</a><br>
        <a href="/benefits">Benefits</a><br>
        <a href="/how-it-works">How it works</a><br>
        <a href="/about/story">Our story</a><br>
        <a href="/blog">Our blog</a><br>
        <a href="/about/jobs">Join the team</a><br>
        <br>

        <!-- <div class="foot-head">Help</div>
        <a href="/help">Help</a><br>
		 -->


	</td>
	<td class="footer-nav">
		<a href="http://twitter.com/thinklab" class="social-icon"><img src="https://think-lab.s3.amazonaws.com/s/img/icons/twitter_com.png" width="40"/></a>
		<a href="https://www.facebook.com/pages/Thinklab/310895039088185" class="social-icon"><img src="https://think-lab.s3.amazonaws.com/s/img/icons/facebook_com.png" width="40"/></a>
		<a href="https://plus.google.com/115578983466800753402/" class="social-icon"><img src="https://think-lab.s3.amazonaws.com/s/img/icons/plus_google_com.png" width="40"/></a>
		<a href="https://www.linkedin.com/company/thinklab-co" class="social-icon"><img src="https://think-lab.s3.amazonaws.com/s/img/icons/linkedin_com.png" width="40"/></a>
		<br><br>
		<span class="light" style='font-size:12px;'>&copy; 2015 Thinklab</span>

	</td>

</tr></table>

</div>
</div>
</div>

		

	</div>


  <script></script>
  <script>
  var MEDIA_URL = 'https://think-lab.s3.amazonaws.com/m/';
  var STATIC_URL = 'https://think-lab.s3.amazonaws.com/s/';
  var page_is_authenticated = false;
  var page_page = 'discussion';
  var page_profile_id = undefined;
</script>



	<!-- Note different script type. MUST come before MathJax.js -->
	<script type="text/x-mathjax-config">
	    MathJax.Hub.Config({
	        "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"],
	                        scale: 110, linebreaks: { automatic:true },
	                        EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
	        tex2jax: { inlineMath: [ ["$$", "$$"], ["\\(","\\)"] ],
	                    displayMath: [ ["$$$","$$$"], ["\\[", "\\]"] ],
	                    processEscapes: true,}
	            });

	</script>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>





  <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
  <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
  <script src="https://think-lab.s3.amazonaws.com/s/dist/main.min.js"></script>
  



  
	
  
  
  
<script>
$(function() {
  recordHit('thread', 205);
});
</script>



<script>/* <![CDATA[ */(function(d,s,a,i,j,r,l,m,t){try{l=d.getElementsByTagName('a');t=d.createElement('textarea');for(i=0;l.length-i;i++){try{a=l[i].href;s=a.indexOf('/cdn-cgi/l/email-protection');m=a.length;if(a&&s>-1&&m>28){j=28+s;s='';if(j<m){r='0x'+a.substr(j,2)|0;for(j+=2;j<m&&a.charAt(j)!='X';j+=2)s+='%'+('0'+('0x'+a.substr(j,2)^r).toString(16)).slice(-2);j++;s=decodeURIComponent(s)+a.substr(j,m-j)}t.innerHTML=s.replace(/</g,'&lt;').replace(/\>/g,'&gt;');l[i].href='mailto:'+t.value}}catch(e){}}}catch(e){}})(document);/* ]]> */</script></body>
</html>
